{"version":3,"sources":["pay.js"],"names":[],"mappings":"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","file":"pay-compiled.js","sourcesContent":["/**\n * Created by Roy on 16/7/29.\n */\nimport Vue from \"vue\";\nimport UiHeader from \"../../components/ui-header.vue\";\nimport UiActionsheet from \"../../components/ui-actionsheet.vue\";\nimport UiActionsheetPop from \"../../components/ui-actionsheet-pop.vue\";\nimport config from \"../../../env/config.js\";\n\n//let urlParams = Vue.utils.paramsFormat(window.location.href);\nlet vm =new Vue({\n    el: 'body',\n    components: { UiHeader, UiActionsheet, UiActionsheetPop },\n    data:{\n        locationSearch:'',\n        orderInfo:{},\n        preOrderInfo:{},\n        unusualStatus:false,\n        isLoaded:false,\n        defaultPayment:{},\n        selectedPaymentId:'',\n        showPayment:false,\n        showInvoice:false,\n        //showPaymentType:false,\n        showInvoiceError:false,\n        headTitle:'',\n\n        //发票相关\n        showReceiptNotice: false,//发票须知\n        //isNeed: false,//是否需要发票\n        invoiceCont: {\n            detail: 1,//需要明细\n            computer: '电脑配件',\n            things: '办公用品',\n            material: '耗材'\n        },\n        invoice: {\n            invoiceType: 0,//发票类型(0:不需要发票;1：普通；2：增值税)\n            invoiceTitleType: 1,//发票抬头类型（1：个人；2：单位）\n            invoiceTitleContent: '',//发票抬头内容\n            isNeedDetails: 0,//是否需要明细（1：需要 0:不需要）\n            invoiceContentId: 1,//默认1\n            invoiceContent: '',//发票内容\n        },\n        payGateWays:[],\n        payGateWayConfigId:'',\n        order:{},\n\n        totalProdNum:0,  //全部商品数目\n        popNoAddress:false, //显示无地址\n\n        coupons:[], //优惠券列表\n        myCoupon:{  //优惠券操作变量\n            history:null, //初始化优惠券\n            thisCoupon:null //选中优惠券\n        },\n        showCoupon:false,\n        runningFlag:false,\n        usePoints:false //是否使用积分\n\n    },\n    ready:function(){\n        this.locationSearch=location.search;\n        if(this.locationSearch.length>0)\n            this.getOrder('/api/checkout/showOrder');\n        else\n            this.getOrder();\n    },\n    computed:{\n        invoiceDisplayName:{\n            get:function(){\n                if(this.invoice.invoiceType==0){\n                    return '不需要';\n                }else if(this.invoice.invoiceType==1){\n                    return '明细（普通）-'+this.invoice.invoiceTitleContent;\n                }else if(this.invoice.invoiceType==2){\n                    return '增值税发票'\n                }\n            }\n        },\n        headTitle:{\n            get:function(){\n                let t='确认订单';\n                if(this.showPayment) t='支付方式';\n                else if(this.showInvoice) t='发票信息';\n                return t;\n            }\n        },\n        showSubPage:{\n            get:function(){\n                return this.showPayment||this.showInvoice||this.showCoupon;\n            }\n        //},\n        //popNoAddress:{\n        //    get:function(){\n        //        return this.isLoaded&&!this.orderInfo.receiver;\n        //    }\n        },\n        //佣金剩余可用金额\n        residualAmount:function(){\n            \"use strict\";\n            if(this.orderInfo.brokerage){\n                return this.orderInfo.brokerage.residualAmount||0\n            }\n            return 0;\n        }\n    },\n    methods:{\n        getOrder:function(api,callback,ignore){\n            let url=config.apiHost+(api?api:\"/api/checkout/initOrder\");\n            let params={\n                ut:Vue.auth.getUserToken(),\n                sessionId:Vue.session.getSessionId(),\n                companyId:Vue.mallSettings.getCompanyId(),\n                platformId:config.platformId\n            }\n            if(ignore) params.ignoreChange=1;\n            Vue.api.postForm(url, params, (res)=> {\n                //如果存在非法商品\n                if(res.code!=0&&res.code!='0') {\n                    this.unusualStatus=true;\n                    this.unusualExecute(res.data.error);\n                    return;\n                }\n                this.unusualStatus=false;\n                //\n                //if(res.data&&typeof res.data.merchantList=='undefined') {\n                //    if (this.locationSearch=='?q') {\n                //        history.back();\n                //    } else {\n                //        window.location.href=config.contextPath+\"/cart.html\";\n                //    }\n                //    return;\n                //}\n\n                if(res.data.allCoupon) {\n                    (res.data.allCoupon.orderCoupons || []).forEach(function (v) {\n                        v.isFold = true;\n                    })\n                }\n                this.orderInfo=res.data;\n                //###优惠券相关###\n                this.myCoupon= {\n                    history: null,\n                    thisCoupon: null\n                }\n                this.coupons=this.orderInfo.allCoupon.orderCoupons;\n                this.coupons.forEach((v)=>{\n                    \"use strict\";\n                    if(v.selected==1) {\n                        this.myCoupon.history = v;\n                        this.myCoupon.thisCoupon = v;\n                    }\n                })\n\n\n                //获取默认支付方式\n                this.getDefaultPayment();\n                if(!api){\n                    var url = location.pathname + this.locationSearch;\n                    window.history.replaceState(null, \"\", url);\n                }\n                var invoice=this.orderInfo.orderInvoice.invoice||{};\n                this.invoice = {\n                    invoiceType: invoice.invoiceType||this.invoice.invoiceType,\n                    invoiceTitleType: invoice.invoiceTitleType||this.invoice.invoiceTitleType,\n                    invoiceTitleContent: invoice.invoiceTitleContent||this.invoice.invoiceTitleContent,\n                    isNeedDetails: invoice.isNeedDetails||this.invoice.isNeedDetails,\n                    invoiceContentId: invoice.invoiceContentId||this.invoice.invoiceContentId,\n                    invoiceContent: invoice.invoiceContent||this.invoice.invoiceContent\n                }\n\n                this.invoiceCont=this.orderInfo.orderInvoice.invoiceContentList;\n                this.isLoaded=true;\n\n                //只有在初始化的时候才需要判断是否有没有地址\n                if(!api) {\n                    this.popNoAddress = !this.orderInfo.receiver;\n                    //如果没有收货地址，弹窗提示\n                    if (this.popNoAddress) {\n                        this.checkAddress();\n                        return;\n                    }\n                }\n                //如果提交订单时,需要调用回调;\n                if(callback) callback();\n            })\n        },\n        //商品不正常状态处理\n        unusualExecute:function(data){\n            \"use strict\";\n            this.preOrderInfo=data;\n            var dia,title,button,content='';\n            if(this.preOrderInfo.type==0){\n                title='<div class=\"c9 text-center\">选购的商品总价发生了变化</div>';\n                button=['<span style=\"color:gray\">返回购物车</span>','继续结算'];\n            }else if(this.preOrderInfo.type==1){\n                title='<div class=\"c9 text-center\">以下商品暂时无货!</div>';\n                button=['<span style=\"color:gray\">返回购物车</span>','继续结算'];\n            }else if(this.preOrderInfo.type==2){\n                title='<div class=\"c9 text-center\">选购商品全部无货!</div>'\n                button=['<span style=\"color:gray\">返回购物车</span>'];\n            }else{\n                return;\n            }\n\n            if(this.preOrderInfo.type==0||this.preOrderInfo.type==1) {\n                for (let item of (this.preOrderInfo.data || [])) {\n                    content += '<li class=\"ui-border-b\" style=\"margin:0;margin: 0;\">' +\n                        '<div class=\"ui-list-thumb\">' +\n                        '<img src=\"' + item.imgUrl + '\" width=\"60\" height=\"60\"></div>' +\n                        '<div class=\"ui-list-info\">' +\n                        '<p class=\"name ui-nowrap-multi\">' + item.name + '</p></div></li>';\n                }\n            }\n            content='<ul class=\"ui-list ui-list-customize\" style=\"background:none;overflow: auto;max-height: 200px;\">'+content+'</ul>';\n\n            dia=$.dialog({\n                title:title,\n                content:content,\n                button:button\n            });\n\n            dia.on(\"dialog:action\",(e)=> {\n                if (e.index == 0)\n                    location.href = '/cart.html';\n                else {\n                    this.getOrder(null,null,true);\n                }\n            });\n        },\n        //获取默认支付方式\n        getDefaultPayment:function(){\n            for(let payment of this.orderInfo.payments||[]){\n                if(payment.selected==1) {\n                    this.defaultPayment = payment;\n                    this.selectedPaymentId=this.defaultPayment.paymentId;\n                }\n            }\n        },\n        //获取商家id,对于O2O需要传商家id，但对于商城则不需要\n        getMerchantId: function(){\n            //只考虑一个商家，所以在数组中只取一个\n            if(this.orderInfo.merchantList||this.orderInfo.merchantList.length>1)\n                return this.orderInfo.merchantList[0].merchantId;\n            return '';\n        },\n        //提交订单\n        submitOrder:function() {\n            //showOrder目前暂时不支持\n            //this.getOrder('/api/checkout/showOrder',()=>{\n            //    \"use strict\";\n            //    //判断地址\n            //    this.popNoAddress = !this.orderInfo.receiver;\n            //    //如果没有收货地址，弹窗提示\n            //    if (this.popNoAddress) {\n            //        this.checkAddress();\n            //        return;\n            //    }\n            var url = config.apiHost + '/api/checkout/submitOrder';\n            var params = {\n                ut: Vue.auth.getUserToken(),\n                sessionId: Vue.session.getSessionId(),\n                companyId: Vue.mallSettings.getCompanyId()\n            }\n            //如果是O2O,需要传商家id\n            if (config.isO2O) params.merchantId = this.getMerchantId();\n            this.runningFlag = true;\n            Vue.api.postForm(url, params, (res)=> {\n                this.runningFlag = false;\n                this.order = res.data;\n                //如果是在线支付\n                if (this.defaultPayment.paymentId == 1)\n                    window.location.href = \"/pay/pay-way.html?orderCode=\" + this.order.orderCode;\n                else\n                    window.location.href = \"/pay/pay-success.html?p=\" + this.defaultPayment.name + \"&a=\" + this.order.amount + \"&orderCode=\" + this.order.orderCode;\n\n            })\n            //});\n\n        },\n        //初始化各窗口\n        setInit:function() {\n            if (this.showSubPage) {\n                this.showInvoice = false;\n                this.showPayment = false;\n                this.showCoupon=false;\n                //this.showPaymentType = false;\n            } else {\n                if (this.locationSearch=='?q') {\n                    history.back();\n                    return;\n                }\n                var dia=$.dialog({\n                    title:'您确定要取消订单返回购物车吗？',\n                    content:'',\n                    button:['<span style=\"color:gray\">取消订单</span>','再看看']\n                });\n\n                dia.on(\"dialog:action\",function(e){\n                    if(e.index==0)\n                        location.href='/cart.html';\n                });\n            }\n        },\n        //保存支付方式\n        savePayment:function(paymentId){\n            var url=config.apiHost+'/api/checkout/savePayment';\n            var params={\n                ut:Vue.auth.getUserToken(),\n                paymentId:paymentId,\n                companyId:Vue.mallSettings.getCompanyId()\n            }\n            setTimeout(()=>{\n                Vue.api.postForm(url, params, (res)=> {\n                    this.showPayment=false;\n                    $.tips({\n                        content: '保存支付方式成功',\n                        stayTime: 2000,\n                        type: \"warn\"\n                    });\n                    this.getOrder('/api/checkout/showOrder');\n                })\n            },300)\n        },\n        //获取上一次使用发票\n        getLastUsedInvoice:function(invoiceType){\n            if(invoiceType!=1&&invoiceType!=2)\n                return;\n            var url=config.apiHost+'/api/checkout/lastUsedInvoice';\n            var params={\n                ut:Vue.auth.getUserToken(),\n                invoiceType:invoiceType,\n                companyId:Vue.mallSettings.getCompanyId()\n            }\n            Vue.api.postForm(url, params, (result) => {\n                var invoice=result.data||{};\n                this.invoice = {\n                    invoiceType: invoice.invoiceType||this.invoice.invoiceType,\n                    invoiceTitleType: invoice.invoiceTitleType||this.invoice.invoiceTitleType,\n                    invoiceTitleContent: invoice.invoiceTitleContent||this.invoice.invoiceTitleContent,\n                    isNeedDetails: invoice.isNeedDetails||this.invoice.isNeedDetails,\n                    invoiceContentId: invoice.invoiceContentId||this.invoice.invoiceContentId,\n                    invoiceContent: invoice.invoiceContent||this.invoice.invoiceContent\n                }\n            });\n        },\n        //保存发票信息\n        saveOrderInvoice: function(){\n            if(this.invoice.invoiceTitleType == 2 && this.invoice.invoiceTitleContent == ''){\n                $.tips({\n                    content: '请填写发票抬头',\n                    stayTime: 2000,\n                    type: \"warn\"\n                })\n            }else{\n                if(this.invoice.invoiceTitleType == 1){\n                    this.invoice.invoiceTitleContent = '个人';\n                }\n\n                this.updateInvoiceContent();\n                var param = this.invoice;\n                param.ut = Vue.auth.getUserToken();\n                param.companyId = Vue.mallSettings.getCompanyId();\n\n\n                var url = config.apiHost + '/api/checkout/saveOrderInvoice';\n                Vue.api.postForm(url, param, (res) => {\n                    var el = $.tips({\n                        content: '发票保存成功',\n                        stayTime: 2000,\n                        type: \"warn\"\n                    });\n                    this.getOrder('/api/checkout/showOrder');\n                    this.showInvoice=false;\n                    //延时操作\n                    //var that=this;\n                    //setTimeout(function(){\n                    //    that.showInvoice=false;\n                    //},100)\n                }, (res) => {\n                    console.log(res)\n                })\n\n            }\n        },\n\n        //更新发票内容\n        updateInvoiceContent: function () {\n            if (this.invoice.invoiceContentId && this.invoiceCont) {\n                for (var i = 0; i < this.invoiceCont.length; i++) {\n                    if (this.invoiceCont[i].invoiceContentId == this.invoice.invoiceContentId) {\n                        this.invoice.invoiceContent = this.invoiceCont[i].invoiceContentValue;\n                        return;\n                    }\n                }\n            }\n        },\n\n        //地址选择url\n        getAddressUrl: function () {\n            var base = \"/my/address-chose.html\";\n            if (this.orderInfo.receiver) {\n                base += \"?receiverId=\" + this.orderInfo.receiver.receiverId;\n            }\n\n            return base;\n        },\n\n        /**\n         * 德升增加内容\n         */\n        //弹窗提示没有收货地址\n        checkAddress:function(){\n            \"use strict\";\n            var dia=$.dialog({\n                title:'您还没有收货地址，是否新建',\n                content:'',\n                button:['取消','新建']\n            });\n            dia.on(\"dialog:action\",(e)=>{\n                if(e.index==0) {\n                    this.popNoAddress = false;\n                }else\n                    location.href='/my/address-chose.html';\n            });\n        },\n\n        //保存买家备注\n        saveRemark:function(remark,id){\n            \"use strict\";\n            let url=config.apiHost + \"/api/checkout/saveRemark\";\n            let params = {\n                ut: Vue.auth.getUserToken(),\n                remark:(remark||'').substr(0,12),\n                id:id\n            }\n            if(params.remark.length==0) return;\n            Vue.api.postForm(url, params, (res)=> {\n                this.getOrder('/api/checkout/showOrder');\n            })\n        },\n        //保存佣金\n        saveBrokerage:function(amount){\n            \"use strict\";\n            if(!amount) return;\n            let url=config.apiHost + \"/api/checkout/saveBrokerage\";\n            let params = {\n                ut: Vue.auth.getUserToken(),\n                usageAmount:amount||0\n            }\n            Vue.api.postForm(url, params, (res)=> {\n                this.getOrder('/api/checkout/showOrder');\n            })\n        },\n        //保存使用积分\n        savePoints:function(point){\n            \"use strict\";\n            let url=config.apiHost + \"/api/checkout/savePoints\";\n            let params = {\n                ut: Vue.auth.getUserToken(),\n                points:this.usePoints?(point||0):0\n            }\n            Vue.api.postForm(url, params, (res)=> {\n                this.getOrder('/api/checkout/showOrder');\n            },(res)=>{\n                if(['10200003','10200004','10200005','10200006'].indexOf(res.code.toString())>=0) {\n                    this.usePoints = false;\n                    $.tips({\n                        content: res.message,\n                        stayTime: 2000,\n                        type: \"warn\"\n                    });\n                    this.getOrder('/api/checkout/showOrder');\n                }\n            })\n        },\n        //选择订单优惠券\n        selectCoupon:function(coupons,coupon){\n            \"use strict\";\n            //无效优惠券\n            if(coupon.isAvailable==0) return;\n            //取消选中\n            if(coupon.selected==1) {\n                coupon.selected=0;\n                this.myCoupon.thisCoupon=null;\n                return;\n            }\n            //选中一个优惠券\n            if(coupons instanceof Array){\n                coupons.forEach(function(v){\n                    v.selected=0;\n                })\n            }\n            coupon.selected=1;\n            this.myCoupon.thisCoupon=coupon;\n        },\n        //保存订单优惠券\n        saveCoupon:function(selected,couponId){\n            \"use strict\";\n            var selected,couponId;\n            if(this.myCoupon.thisCoupon) {\n                selected = 1;\n                couponId=this.myCoupon.thisCoupon.couponId\n            }else if(this.myCoupon.history){\n                selected = 0;\n                couponId=this.myCoupon.history.couponId\n            }else{\n                this.showCoupon=false;\n                return;\n            }\n            let url=config.apiHost + \"/api/checkout/saveCoupon\";\n            let params = {\n                ut: Vue.auth.getUserToken(),\n                companyId:Vue.mallSettings.getCompanyId(),\n                selected:selected,\n                couponId:couponId\n            }\n            Vue.api.postForm(url, params, (res)=> {\n                this.showCoupon=false;\n                this.getOrder('/api/checkout/showOrder');\n                $.tips({\n                    content: '保存订单优惠券成功',\n                    stayTime: 2000,\n                    type: \"warn\"\n                });\n            })\n        }\n        //积分\n    }\n})"]}